<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TCSS 142 Project 3 Tester â€“ EmotionAnalyzer</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg-gradient: radial-gradient(circle at top, #181c3a 0%, #050810 55%, #02040a 100%);
  --accent: #4ade80;
  --accent-soft: rgba(74, 222, 128, 0.15);
  --accent-strong: #22c55e;
  --accent-danger: #fb7185;
  --card-bg: rgba(17, 24, 39, 0.9);
  --border-subtle: rgba(148, 163, 184, 0.35);
  --text-muted: #9ca3af;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  color: #e5e7eb;
  background: var(--bg-gradient);
  display: flex;
  align-items: stretch;
  justify-content: center;
}

.main-shell {
  width: 100%;
  max-width: 1100px;
  margin: 24px auto;
  padding: 16px;
}

.hero {
  text-align: left;
  margin-bottom: 18px;
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  align-items: center;
  justify-content: space-between;
}

.hero-text {
  max-width: 640px;
}

.title-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--accent-soft);
  background: radial-gradient(circle at top left, rgba(74, 222, 128, 0.18), rgba(15, 23, 42, 0.9));
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--accent);
}

.title-chip span.icon {
  font-size: 14px;
}

.hero h1 {
  font-size: clamp(26px, 4vw, 34px);
  margin: 10px 0 4px 0;
  font-weight: 700;
}

.hero h1 span {
  background: linear-gradient(120deg, #4ade80, #22d3ee);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.hero-subtitle {
  font-size: 14px;
  color: var(--text-muted);
  max-width: 560px;
}

.hero-subtitle code {
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(15, 23, 42, 0.9);
  border: 1px solid rgba(148, 163, 184, 0.4);
}

.hero-meta {
  text-align: right;
  font-size: 12px;
  color: var(--text-muted);
}

.hero-meta div {
  opacity: 0.9;
}

/* Layout */

.shell-grid {
  display: grid;
  grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
  gap: 16px;
}

@media (max-width: 900px) {
  .shell-grid {
    grid-template-columns: minmax(0, 1fr);
  }
  .hero {
    text-align: left;
  }
}

/* Left card */

.info-card {
  border-radius: 18px;
  background: var(--card-bg);
  border: 1px solid var(--border-subtle);
  padding: 16px 18px 14px;
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.65);
  backdrop-filter: blur(22px);
}

.info-card h2 {
  margin: 0 0 8px;
  font-size: 16px;
}

.info-card p {
  margin: 4px 0;
  font-size: 13px;
  color: var(--text-muted);
}

.info-pill-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 10px;
}

.info-pill {
  font-size: 11px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid rgba(75, 85, 99, 0.9);
  background: rgba(15, 23, 42, 0.95);
  display: inline-flex;
  align-items: center;
  gap: 5px;
}

.info-pill span.bullet {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: var(--accent);
}

.info-mini-list {
  list-style: none;
  padding-left: 0;
  margin: 10px 0 0;
  font-size: 12px;
  color: var(--text-muted);
}

.info-mini-list li {
  margin-bottom: 4px;
}

/* Right side */

.tester-card {
  border-radius: 18px;
  background: var(--card-bg);
  border: 1px solid var(--border-subtle);
  padding: 16px 18px 14px;
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(22px);
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.tester-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  font-size: 12px;
}

.status-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 3px 9px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.95);
  border: 1px solid rgba(55, 65, 81, 0.95);
  color: var(--text-muted);
}

.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: var(--accent);
  box-shadow: 0 0 10px rgba(74, 222, 128, 0.8);
}

.small-label {
  font-size: 11px;
  color: var(--text-muted);
}

/* textarea / output */

textarea {
  width: 100%;
  height: 270px;
  background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.97), #020617);
  color: #e5e7eb;
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 13px;
  border: 1px solid rgba(55, 65, 81, 0.95);
  border-radius: 10px;
  padding: 10px 11px;
  resize: vertical;
  outline: none;
  box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
}

textarea:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.5), 0 0 40px rgba(22, 163, 74, 0.4);
}

/* buttons */

.button-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 4px;
}

button {
  border: none;
  border-radius: 999px;
  padding: 8px 18px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 7px;
  transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, background 0.12s ease-out, opacity 0.12s;
  letter-spacing: 0.02em;
}

button span.icon {
  font-size: 15px;
}

button.primary {
  background: linear-gradient(135deg, var(--accent-strong), #22d3ee);
  color: #020617;
  box-shadow: 0 8px 25px rgba(34, 197, 94, 0.5);
}

button.secondary {
  background: rgba(15, 23, 42, 0.95);
  border: 1px solid rgba(75, 85, 99, 0.9);
  color: #e5e7eb;
}

button.ghost {
  background: transparent;
  border: 1px dashed rgba(75, 85, 99, 0.9);
  color: var(--text-muted);
}

button:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.55);
  opacity: 0.98;
}

button:active {
  transform: translateY(0);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.55);
}

/* output */

.output-block {
  margin-top: 4px;
}

.output-label-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.output-label-row span.right {
  font-style: italic;
}

pre {
  width: 100%;
  margin: 0;
  background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.97), #020617);
  text-align: left;
  padding: 10px;
  overflow-x: auto;
  white-space: pre-wrap;
  border-radius: 10px;
  border: 1px solid rgba(55, 65, 81, 0.95);
  font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 12px;
  color: #e5e7eb;
}

/* footer mini */

.footer-note {
  margin-top: 10px;
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  opacity: 0.9;
}
</style>
</head>
<body>
<div class="main-shell">

  <header class="hero">
    <div class="hero-text">
      <div class="title-chip">
        <span class="icon">ðŸ§ </span>
        <span>Emotion analyzer tester</span>
      </div>
      <h1><span>TCSS 142</span> Project 3 Strict Tester</h1>
      <p class="hero-subtitle">
        Paste your full <code>EmotionAnalyzer.java</code>, then run the official strict tests.
        This checks your arrays, weights, formatting, and boundary logic so you can fix problems
        before you submit to Canvas.
      </p>
    </div>
    <div class="hero-meta">
      <div>Class: TCSS 142 Programming Principles</div>
      <div>Project 3 â€“ Emotion aware text log analyzer</div>
    </div>
  </header>

  <main class="shell-grid">

    <section class="info-card">
      <h2>How to use this tester</h2>
      <p>Use this page as a quick pre-submit check. A clean run here does not replace your own testing, but it helps you catch format and logic issues that the auto grader cares about.</p>

      <ul class="info-mini-list">
        <li>1. Paste the entire contents of <strong>EmotionAnalyzer.java</strong> on the right.</li>
        <li>2. Make sure the file contains <code>public class EmotionAnalyzer</code> and the required methods.</li>
        <li>3. Select <em>Insert template</em> on the right if you want a reminder of the required methods.</li>
        <li>4. Select <em>Run tests</em> and read the output panel for passes or detailed hints.</li>
      </ul>

      <div class="info-pill-row">
        <div class="info-pill">
          <span class="bullet"></span>
          <span>Checks arrays, weights, and method contracts</span>
        </div>
        <div class="info-pill">
          <span class="bullet" style="background: #38bdf8;"></span>
          <span>Highlights formatting problems in summary output</span>
        </div>
        <div class="info-pill">
          <span class="bullet" style="background: var(--accent-danger); box-shadow: 0 0 10px rgba(248, 113, 113, 0.8);"></span>
          <span>Shows boundary cases and mixed-line scores</span>
        </div>
      </div>
    </section>

    <section class="tester-card">
      <div class="tester-header">
        <div class="small-label">Paste your <code>EmotionAnalyzer.java</code> below</div>
        <div class="status-pill">
          <div class="status-dot" id="statusDot"></div>
          <span id="statusText">Ready to run</span>
        </div>
      </div>

      <textarea id="code" placeholder="// Paste your full EmotionAnalyzer.java here"></textarea>

      <div class="button-row">
        <button class="secondary" onclick="insertTemplate()">
          <span class="icon">ðŸ“‹</span>
          <span>Insert template</span>
        </button>
        <button class="primary" onclick="runTests()">
          <span class="icon">â–¶</span>
          <span>Run tests</span>
        </button>
        <button class="ghost" onclick="clearOutput()">
          <span class="icon">ðŸ§¹</span>
          <span>Clear output</span>
        </button>
      </div>

      <div class="output-block">
        <div class="output-label-row">
          <span>Tester output</span>
          <span class="right">Results come directly from the official tester file</span>
        </div>
        <pre id="out">(waiting...)</pre>
      </div>
    </section>

  </main>

  <div class="footer-note">
    This page runs your code with <code>EmotionAnalyzerTester.java</code> on the server side.
  </div>

</div>

<script>
const outEl = document.getElementById("out");
const codeEl = document.getElementById("code");
const statusTextEl = document.getElementById("statusText");
const statusDotEl = document.getElementById("statusDot");

function setStatus(text, mode) {
  statusTextEl.textContent = text;
  if (mode === "running") {
    statusDotEl.style.background = "#38bdf8";
    statusDotEl.style.boxShadow = "0 0 10px rgba(56, 189, 248, 0.9)";
  } else if (mode === "error") {
    statusDotEl.style.background = "#fb7185";
    statusDotEl.style.boxShadow = "0 0 10px rgba(248, 113, 113, 0.9)";
  } else {
    statusDotEl.style.background = "#4ade80";
    statusDotEl.style.boxShadow = "0 0 10px rgba(74, 222, 128, 0.9)";
  }
}

function insertTemplate() {
  const tpl = `public class EmotionAnalyzer {
    // Required per Project 3 specification:

    // public static final String[] POS, NEG;
    // public static final int[] PW, NW;

    // public static String normalizeToken(String raw);
    // public static int indexOf(String[] arr, String word);

    // public static int scoreLine(String line,
    //                             String[] pos, int[] posW,
    //                             String[] neg, int[] negW);

    // public static String classify(int score);

    // public static void writeLineResult(java.io.PrintWriter out,
    //                                    int lineNum,
    //                                    int score,
    //                                    String label);

    // public static void writeSummary(java.io.PrintWriter out,
    //                                 int positives, int negatives, int neutrals);

    // public static String promptForExistingFile(java.util.Scanner sc, String prompt);
    // public static char readYesNo(java.util.Scanner sc, String prompt);
}`;
  if (codeEl.value.trim() && !confirm("Replace the current code with a template?")) return;
  codeEl.value = tpl;
  setStatus("Template inserted", "ready");
}

async function runTests() {
  const code = codeEl.value;
  if (!code.trim()) {
    alert("Please paste your EmotionAnalyzer.java code first.");
    return;
  }
  setStatus("Running tests", "running");
  outEl.textContent = "Running tests...";

  try {
    const res = await fetch("/run", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ code })
    });

    const text = await res.text();
    outEl.textContent = text || "(no output)";
    if (res.ok) {
      setStatus("Tests finished", "ready");
    } else {
      setStatus("Tester returned an error", "error");
    }
  } catch (e) {
    outEl.textContent = "Error: " + e;
    setStatus("Network or server error", "error");
  }
}

function clearOutput() {
  outEl.textContent = "(waiting...)";
  setStatus("Ready to run", "ready");
}
</script>
</body>
</html>
